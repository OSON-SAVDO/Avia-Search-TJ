<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: -apple-system, sans-serif; background: #f2f5f8; margin: 0; padding-bottom: 30px; }
        .search-header { background: #007aff; padding: 20px; color: white; border-bottom-left-radius: 20px; border-bottom-right-radius: 20px; }
        .input-box { background: white; margin: -20px 15px 20px; padding: 15px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        input { width: 90%; border: none; padding: 12px; font-size: 16px; outline: none; border-bottom: 1px solid #eee; }
        
        /* Стили билета как на фото 5920 */
        .ticket-card { background: white; margin: 15px; border-radius: 20px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .price-row { font-size: 26px; font-weight: 800; color: #262626; margin-bottom: 15px; }
        
        .flight-info { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .airline-img { width: 40px; height: 40px; border-radius: 50%; }
        
        .timeline { position: relative; padding-left: 20px; border-left: 2px solid #007aff; margin-left: 10px; }
        .time-item { margin-bottom: 20px; position: relative; }
        .time-item::before { content: ''; position: absolute; left: -26px; top: 5px; width: 10px; height: 10px; background: white; border: 2px solid #007aff; border-radius: 50%; }
        
        .time-bold { font-size: 18px; font-weight: bold; }
        .city-gray { color: #8c8c8c; font-size: 14px; }

        .btn-buy { background: #ff6d00; color: white; display: block; text-align: center; padding: 15px; border-radius: 15px; text-decoration: none; font-weight: bold; font-size: 18px; margin-top: 10px; }
    </style>
</head>
<body>

<div class="search-header"><h2>Поиск билетов</h2></div>

<div class="input-box">
    <form action="/search" method="post">
        <input type="text" name="from" placeholder="Откуда (Москва, Душанбе...)" required>
        <input type="text" name="to" placeholder="Куда (Стамбул, Дубай...)" required>
        <input type="date" name="date" style="border:none">
        <button type="submit" style="width:100%; background:#007aff; color:white; border:none; padding:12px; border-radius:10px; margin-top:10px; font-weight:bold;">Найти билеты</button>
    </form>
</div>

{% for f in flights %}
<div class="ticket-card">
    <div class="price-row">{{ f.price }} ₽</div>
    
    <div class="flight-info">
        <img src="https://pics.avs.io/al_base/64/64/{{ f.airline }}.png" class="airline-img">
        <div>
            <div style="font-weight:bold">{{ f.airline }}</div>
            <div class="city-gray">В пути: {{ f.duration // 60 }}ч {{ f.duration % 60 }}м</div>
        </div>
    </div>

    <div class="timeline">
        <div class="time-item">
            <span class="time-bold">{{ f.departure_at[11:16] }}</span> 
            <span class="city-gray">{{ f.origin }} (Вылет)</span>
        </div>
        <div class="time-item" style="margin-bottom:0">
            <span class="time-bold">--:--</span> 
            <span class="city-gray">{{ f.destination }} (Прилет)</span>
        </div>
    </div>

    <a href="https://www.aviasales.ru/search/{{f.origin}}{{f.destination}}?marker={{marker}}" class="btn-buy">Купить за {{ f.price }} ₽</a>
</div>
{% endfor %}

</body>
</html>
